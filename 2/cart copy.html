<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping Cart - Love Fruits Bowl</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 70px 10px;
        background: #f5f7fa;
      }

      /* Navbar */
      .navbar-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        background: #fff;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
      }
      .logo {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: #28a745;
        font-weight: 700;
        font-size: 1rem;
      }
      .logo-img {
        width: 36px;
        height: 36px;
        margin-right: 8px;
        border-radius: 50%;
      }
      .nav-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 10px;
      }
      .nav-menu a {
        text-decoration: none;
        color: #333;
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 0.9rem;
      }
      .nav-menu a:hover {
        background: #28a745;
        color: #fff;
      }

      /* Cart */
      .cart-container {
        max-width: 100%;
        margin: auto;
        background: #fff;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      }
      .cart-item {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 12px;
        margin-bottom: 15px;
        background: #fafafa;
      }
      .quantity-btn {
        background: #28a745;
        color: #fff;
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 6px;
      }
      .remove-btn {
        border: none;
        background: transparent;
        color: #dc3545;
      }

      .cart-summary {
        background: linear-gradient(135deg, #28a745, #6ddf6d);
        color: #fff;
        padding: 20px;
        border-radius: 14px;
        text-align: center;
      }
      .checkout-btn {
        background: #fff;
        color: #28a745;
        border: none;
        padding: 12px 25px;
        border-radius: 30px;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        margin-top: 15px;
        width: 100%;
      }
      .back-btn {
        background: #28a745;
        color: #fff;
        padding: 8px 18px;
        border-radius: 25px;
        text-decoration: none;
      }

      /* Mobile Improvements */
      @media (min-width: 768px) {
        body {
          padding: 80px 0;
        }
        .cart-container {
          max-width: 1100px;
          padding: 30px;
        }
        .cart-item {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
        }
        .checkout-btn {
          width: auto;
        }
        .logo {
          font-size: 1.2rem;
        }
      }

      .modal-content {
        border-radius: 15px;
      }
    </style>
  </head>

  <body>
    <div class="navbar-container">
      <a href="index.html" class="logo">
        <img src="logo.jpeg" class="logo-img" />Love Fruits Bowl
      </a>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="index.html#products">Products</a></li>
        <li><a href="cart.html">Cart</a></li>
      </ul>
    </div>

    <div class="cart-container">
      <h5 class="text-center mb-4">
        <i class="fas fa-shopping-cart"></i> Your Cart
      </h5>
      <div id="cartItems"></div>
      <div id="cartSummary"></div>
      <div class="text-center mt-3">
        <a href="index.html" class="back-btn">Continue Shopping</a>
      </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal fade" id="addressModal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5>Delivery Details</h5>
            <button class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input
              id="custName"
              class="form-control mb-3"
              placeholder="Customer Name"
            />
            <input
              id="custPhone"
              class="form-control mb-3"
              placeholder="Phone Number"
            />
            <textarea
              id="deliveryAddress"
              class="form-control mb-3"
              rows="3"
              placeholder="Delivery Address"
            ></textarea>

            <label class="fw-bold mb-2">Payment Method</label>
            <select
              id="paymentMethod"
              class="form-select mb-3"
              onchange="toggleUPI()"
            >
              <option value="COD">Cash On Delivery</option>
              <option value="UPI">UPI Payment</option>
            </select>

            <div id="upiSection" style="display: none" class="text-center">
              <p class="fw-bold text-success">Scan & Pay</p>
              <img src="upi-qr.png" width="200" class="img-fluid mb-2" />
              <p>UPI ID: yourupi@okaxis</p>
              <small>Please pay before confirming order</small>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-success w-100" onclick="proceedToCheckout()">
              Confirm Order
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      let cart = JSON.parse(localStorage.getItem("fruitsCart")) || [];

      function updateCartDisplay() {
        let cartItems = document.getElementById("cartItems");
        let cartSummary = document.getElementById("cartSummary");

        if (cart.length === 0) {
          cartItems.innerHTML = '<p class="text-center">Cart Empty</p>';
          cartSummary.innerHTML = "";
          return;
        }

        let html = "";
        let total = 0;
        let items = 0;

        cart.forEach((item, i) => {
          items += item.quantity;
          total += item.price * item.quantity;
          html += `<div class="cart-item">
<div><b>${item.name}</b> (Qty: ${item.quantity})</div>
<div>
<button class="quantity-btn" onclick="updateQuantity(${i},-1)">-</button>
<button class="quantity-btn" onclick="updateQuantity(${i},1)">+</button>
‚Çπ${item.price * item.quantity}
<button class="remove-btn" onclick="removeFromCart(${i})"><i class="fas fa-trash"></i></button>
</div>
</div>`;
        });

        cartItems.innerHTML = html;
        cartSummary.innerHTML = `
<p>Total Items: ${items}</p>
<p>Total Amount: ‚Çπ${total}</p>
<a href="#" class="checkout-btn" data-bs-toggle="modal" data-bs-target="#addressModal">Checkout via WhatsApp</a>`;
      }

      function updateQuantity(i, val) {
        cart[i].quantity += val;
        if (cart[i].quantity <= 0) cart.splice(i, 1);
        saveCart();
        updateCartDisplay();
      }
      function removeFromCart(i) {
        cart.splice(i, 1);
        saveCart();
        updateCartDisplay();
      }
      function saveCart() {
        localStorage.setItem("fruitsCart", JSON.stringify(cart));
      }

      function toggleUPI() {
        const payment = document.getElementById("paymentMethod").value;
        document.getElementById("upiSection").style.display =
          payment === "UPI" ? "block" : "none";
      }

      function proceedToCheckout() {
        const name = document.getElementById("custName").value;
        const phone = document.getElementById("custPhone").value;
        const address = document.getElementById("deliveryAddress").value;
        const payment = document.getElementById("paymentMethod").value;

        if (!name || !phone || !address) {
          alert("Fill all delivery details");
          return;
        }

        let msg = "Cart Order - Love Fruits Bowl\n\n";
        let total = 0;
        cart.forEach((item) => {
          msg += `ü•ó ${item.name} (Qty: ${item.quantity}) - ‚Çπ${item.price * item.quantity}\n`;
          total += item.price * item.quantity;
        });

        msg += `\nüí∞ Total Amount: ‚Çπ${total}`;
        msg += `\nüë§ Name: ${name}`;
        msg += `\nüìû Phone: ${phone}`;
        msg += `\nüè† Address: ${address}`;
        msg += `\nüí≥ Payment: ${payment}`;
        msg += `\n\nPlease confirm this order`;
        msg += `\n‚úÖ Yes - Confirm Order`;
        msg += `\n‚ùå No - Cancel Order`;

        window.open(
          `https://wa.me/9047343441?text=${encodeURIComponent(msg)}`,
          "_blank",
        );
      }

      updateCartDisplay();
    </script>
  </body>
</html>
